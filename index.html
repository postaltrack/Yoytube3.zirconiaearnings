<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Watch and Earn</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        background-color: #f9f9f9;
        margin: 0;
        padding: 20px;
    }
    h1 {
        color: #2c3e50;
    }
    #timer, #reward {
        font-size: 20px;
        margin-top: 15px;
        color: #333;
    }
    iframe {
        border: none;
        width: 560px;
        height: 315px;
        max-width: 100%;
    }
</style>
</head>
<body>

<h1>Watch and Earn</h1>

<!-- YouTube Video Embed -->
<div id="player"></div>

<!-- Display Timer and Rewards -->
<div id="timer">Time Watched: 0m 0s</div>
<div id="reward">Reward: ₦0</div>

<script>
    let player;
    let totalSecondsWatched = 0;
    let reward = 0;
    let watchInterval;

    // Load YouTube IFrame Player API
    let tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    let firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // Create player when API is ready
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            videoId: 'Etq_mEeNho8', // Your video ID
            playerVars: {
                'autoplay': 0,
                'controls': 1
            },
            events: {
                'onStateChange': onPlayerStateChange
            }
        });
    }

    // Detect when the player state changes
    function onPlayerStateChange(event) {
        if (event.data === YT.PlayerState.PLAYING) {
            if (!watchInterval) {
                watchInterval = setInterval(() => {
                    totalSecondsWatched++;
                    updateTimerAndReward();
                }, 1000);
            }
        } else {
            clearInterval(watchInterval);
            watchInterval = null;
        }
    }

    // Update timer and reward display
    function updateTimerAndReward() {
        let minutes = Math.floor(totalSecondsWatched / 60);
        let seconds = totalSecondsWatched % 60;
        document.getElementById('timer').textContent = `Time Watched: ${minutes}m ${seconds}s`;

        // Reward ₦100 for every 3 full minutes watched
        reward = Math.floor(minutes / 3) * 100;
        document.getElementById('reward').textContent = `Reward: ₦${reward}`;
    }
</script>

</body>
</html>
